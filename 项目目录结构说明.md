# 项目目录结构说明

本文档说明 E-HSS 项目中所有目录的作用和用途。

## 一、项目根目录

```
E-HSS/
├── src/                    # Java 源代码目录
├── WebRoot/                # Web 资源根目录（部署到服务器的内容）
├── .classpath              # Eclipse/MyEclipse 项目配置文件
├── .project                # Eclipse/MyEclipse 项目配置文件
└── 新业务开发完整流程指南.md  # 开发文档
```

## 二、src/ 目录（Java 后端源代码）

```
src/
├── entity/                 # 实体类（Entity/POJO）
├── dao/                    # 数据访问对象（Data Access Object）
├── servlet/                # Servlet 控制器
└── util/                   # 工具类
```

### 2.1 src/entity/
**作用**: 存放实体类（Entity/POJO），对应数据库表结构

**命名规范**: 类名与数据库表名对应（首字母大写，驼峰命名）

**示例文件**:
- `ForumPost.java` - 论坛帖子实体
- `NursingTask.java` - 护理任务实体
- `User.java` - 用户实体
- `Patient.java` - 患者实体
- `Doctor.java` - 医生实体
- 等等...

**特点**:
- 包含私有字段（对应数据库列）
- 包含关联查询字段（用于JOIN查询）
- 包含 Getter/Setter 方法
- 包含辅助方法（如时间格式化）

### 2.2 src/dao/
**作用**: 存放数据访问对象（DAO），负责数据库的增删改查操作

**命名规范**: `[EntityName]DAO.java`

**示例文件**:
- `ForumPostDAO.java` - 论坛帖子数据访问
- `NursingTaskDAO.java` - 护理任务数据访问
- `ForumSectionDAO.java` - 论坛板块数据访问
- 等等...

**主要功能**:
- 查询数据（`getAllXXX()`, `getXXXById()`）
- 创建数据（`createXXX()`）
- 更新数据（`updateXXX()`, `updateStatus()`）
- 删除数据（`deleteXXX()`）

### 2.3 src/org/cloudserviceengineering/app/
**作用**: 存放 Servlet 控制器，处理前端 HTTP 请求

**目录结构**:
```
src/org/cloudserviceengineering/app/
├── login/               # 登录相关 Servlet
│   ├── LoginServlet.java
│   ├── UserManageService_Tool.java
│   └── CloudServiceEngineering.java
└── business/            # 业务相关 Servlet
    ├── AppointmentServlet.java
    ├── ForumServlet.java
    ├── MedicalServiceServlet_Doctor.java
    ├── MedicalServiceServlet_Nurse.java
    └── ...
```

**命名规范**: `[业务名称]Servlet.java` 或 `[业务名称]Servlet_[角色].java`

**示例文件**:
- `business/ForumServlet.java` - 论坛管理 Servlet（高管端）
- `business/MedicalServiceServlet_Nurse.java` - 医疗服务 Servlet（护士端）
- `login/LoginServlet.java` - 登录处理 Servlet
- 等等...

**主要功能**:
- 接收前端请求（`doPost`, `doGet`）
- 根据 `action` 参数分发操作
- 调用 DAO 进行数据库操作
- 返回 JSON 数据给前端

**注解配置**:
- 使用 `@WebServlet` 注解配置 URL 映射
- 例如：`@WebServlet("/servlet/hospital/executive/ForumServlet")`

### 2.4 src/util/
**作用**: 存放工具类，提供通用功能

**示例文件**:
- `DBUtil.java` - 数据库连接工具类
  - 提供 `getConnection()` 方法
  - 配置数据库连接参数（URL、用户名、密码）

## 三、WebRoot/ 目录（Web 资源根目录）

```
WebRoot/
├── business/             # 业务模块资源
│   ├── html/            # 业务页面 JSP 文件
│   ├── css/             # 业务模块 CSS 样式
│   ├── scripts/         # 业务模块 JavaScript 脚本
│   └── basic/           # 基础组件（header.jsp, footer.jsp）
├── home/                 # 各角色主页（JSP）
├── login/                # 登录页面（HTML）
├── registration/         # 注册页面（JSP）
├── SaaSportal/           # 门户选择页面
├── css/                  # 非业务相关 CSS 样式（登录、注册、门户、首页）
├── js/                   # 非业务相关 JavaScript 脚本（登录、注册、首页）
└── images/               # 图片资源
```

### 3.1 WebRoot/business/ 目录

**作用**: 存放所有业务模块的前端资源

```
WebRoot/business/
├── html/                 # 业务页面 HTML 文件
├── css/                  # 业务模块 CSS 样式
└── scripts/              # 业务模块 JavaScript 脚本
```

#### 3.1.1 WebRoot/business/html/
**作用**: 存放各业务模块的 JSP 页面

**目录结构**:
```
WebRoot/business/html/
├── admin/                # 管理员业务页面
├── enterprise/           # 企业用户业务页面
├── university/           # 高校用户业务页面
├── patient/              # 患者业务页面
├── doctor/               # 医生业务页面
├── nurse/                 # 护士业务页面
├── executive/             # 高管业务页面
└── finance/               # 财务业务页面
```

**文件命名**: `[功能名称].jsp`

**示例文件**:
- `executive/CooperationForum/forum-home.jsp` - 论坛首页
- `nurse/nursing-service/daily-nursing.jsp` - 日常护理
- `patient/appointment/new-appointment.jsp` - 新建预约
- 等等...

**特点**:
- JSP 片段（不是完整页面）
- 通过 `business-common.js` 动态加载
- 包含业务逻辑的 UI 结构
- 可以使用 JSP 表达式和脚本片段

#### 3.1.2 WebRoot/business/css/
**作用**: 存放各业务模块的 CSS 样式文件

**文件命名**: `[业务名称].css`

**示例文件**:
- `forum.css` - 论坛管理样式
- `nursing-service.css` - 护理服务样式
- `appointment.css` - 预约样式
- 等等...

**特点**:
- 模块化样式（每个业务模块独立样式文件）
- 包含业务特定的样式类
- 响应式设计支持

#### 3.1.3 WebRoot/business/scripts/
**作用**: 存放各业务模块的 JavaScript 脚本

**文件命名**: `[业务名称].js` 或 `[角色]-home.js`

**示例文件**:
- `forum.js` - 论坛管理业务逻辑
- `nursing-service.js` - 护理服务业务逻辑
- `business-common.js` - 业务通用脚本（路由、动态加载等）
- `patient-home.js` - 患者主页脚本
- `admin-home.js` - 管理员主页脚本
- `executive-home.js` - 高管主页脚本
- `nurse-common.js` - 护士通用脚本
- 等等...

**特点**:
- 模块化 JavaScript（每个业务模块独立脚本）
- 处理前端业务逻辑
- 与后端 Servlet 进行数据交互
- 动态渲染页面内容

### 3.2 WebRoot/home/ 目录

**作用**: 存放各角色的主页 JSP 文件

**目录结构**:
```
WebRoot/home/
├── hospital/
│   ├── doctor-home.jsp      # 医生主页
│   ├── nurse-home.jsp       # 护士主页
│   ├── executive-home.jsp   # 高管主页
│   └── finance-home.jsp     # 财务主页
├── patient/
│   └── patient-home.jsp     # 患者主页
├── admin/
│   └── admin-home.jsp       # 管理员主页
├── enterprise/
│   └── enterprise-home.jsp  # 企业主页
└── university/
    └── university-home.jsp  # 高校主页
```

**特点**:
- 完整的 JSP 页面（包含 `<html>`, `<head>`, `<body>`）
- 使用 `<jsp:include>` 引入 `business/basic/header.jsp` 和 `footer.jsp`
- 包含导航栏（横向导航、侧边栏导航）
- 包含业务内容容器（`#business-content`）
- 通过 `business-common.js` 动态加载业务页面
- 使用 `basePath` 变量设置资源路径

### 3.3 WebRoot/login/ 目录

**作用**: 存放登录相关页面

**文件示例**:
- `patient-login.html` - 患者登录页
- `employee-login.html` - 员工登录页
- `academic-login.html` - 学术登录页

**特点**:
- 完整的登录表单页面
- 包含"没有账号，去注册"链接

### 3.4 WebRoot/registration/ 目录

**作用**: 存放注册相关页面

**文件示例**:
- `registration.html` - 注册页面

**特点**:
- 包含注册表单（姓名、联系电话、身份等）
- 注册成功后显示倒计时弹窗
- 自动跳转回原登录页面

### 3.5 WebRoot/js/ 目录

**作用**: 存放非业务相关的 JavaScript 脚本（登录、注册、首页、门户）

**文件示例**:
- `login.js` - 登录表单验证脚本
- `register.js` - 注册表单验证脚本
- `index.js` - 首页交互脚本
- `main.js` - 主脚本

**特点**:
- 非业务相关的 JavaScript 功能
- 用于登录、注册、首页等通用页面
- 业务相关的脚本在 `business/scripts/` 目录

### 3.6 WebRoot/css/ 目录

**作用**: 存放非业务相关的 CSS 样式文件（登录、注册、门户、首页）

**文件示例**:
- `login.css` - 登录/注册页面样式
- `portal.css` - 门户选择页面样式
- `main.css` - 首页样式
- `site.css` - 站点通用样式

**特点**:
- 非业务相关的 CSS 样式
- 用于登录、注册、门户、首页等通用页面
- 业务相关的样式在 `business/css/` 目录中

### 3.7 WebRoot/business/basic/ 目录

**作用**: 存放基础 JSP 组件（页头、页脚等）

**文件示例**:
- `header.jsp` - 页头组件
- `footer.jsp` - 页脚组件

**特点**:
- 可复用的 JSP 片段
- 使用 `<jsp:include>` 在主页中引入
- `header.jsp` 支持动态参数（pageTitle, userWelcome, logoutLink）
- 使用 `basePath` 变量设置资源路径

### 3.8 WebRoot/images/ 目录

**作用**: 存放图片资源

**文件示例**:
- `logo.jpg` - 网站 Logo
- `bg.jpg`, `bg2.png`, `bg3.jpg` - 背景图片
- `员工端图标.png` - 员工端图标
- `学术端图标.png` - 学术端图标
- `患者端图标.png` - 患者端图标

**特点**:
- 存放所有静态图片资源
- 支持多种图片格式（jpg, png 等）

### 3.9 WebRoot/SaaSportal/ 目录

**作用**: 存放门户选择页面

**文件示例**:
- `index.html` - 门户选择页面（患者版、员工版、学术版）

**特点**:
- 医疗云系统的入口页面
- 从 `index.jsp` 选择医疗云后跳转到这里
- 提供三个端的入口：患者版、员工版、学术版
- 点击后跳转到对应的登录页面

### 3.10 WebRoot/index.jsp

**作用**: 项目入口页面，选择云服务类型

**特点**:
- 提供云服务选择（教育云、企业云、医疗云、抗疫云）
- 选择医疗云后跳转到 `SaaSportal/index.html`
- 其他云类型跳转到对应的 Servlet 处理
- 使用 `js/index.js` 处理交互逻辑

### 3.11 WebRoot/WEB-INF/ 目录

**作用**: Web 应用配置目录（Java Web 标准目录）

**目录结构**:
```
WebRoot/WEB-INF/
├── classes/          # 编译后的 Java 类文件
├── lib/              # 第三方库文件（JAR 包）
└── web.xml          # Web 应用配置文件
```

**说明**:
- `classes/`: 存放编译后的 `.class` 文件（由 MyEclipse 自动生成）
- `lib/`: 存放依赖的 JAR 包（如 MySQL 驱动）
- `web.xml`: Web 应用部署描述符（Servlet 配置等）

### 3.12 WebRoot/META-INF/ 目录

**作用**: 存放元数据信息

**文件示例**:
- `MANIFEST.MF` - 清单文件

**特点**:
- Java Web 应用标准目录
- 包含应用元数据信息

### 3.13 WebRoot/servlet/ 目录（虚拟路径）

**作用**: Servlet 的 URL 映射路径（虚拟路径，实际由 Servlet 处理）

**说明**:
- 这个目录在文件系统中可能不存在
- 是 Servlet 的 URL 路径映射
- 例如：`/servlet/hospital/executive/ForumServlet`
- 实际处理由 `src/servlet/hospital/executive/ForumServlet.java` 完成

## 四、目录对应关系

### 4.1 后端到前端的映射

| 后端路径 | 前端路径 | 说明 |
|---------|---------|------|
| `src/entity/ForumPost.java` | - | 实体类，对应数据库表 |
| `src/dao/ForumPostDAO.java` | - | 数据访问层 |
| `src/org/cloudserviceengineering/app/business/ForumServlet.java` | `WebRoot/business/html/executive/CooperationForum/` | Servlet 处理请求，JSP 显示页面 |
| - | `WebRoot/business/css/forum.css` | 业务样式文件 |
| - | `WebRoot/business/scripts/forum.js` | 业务脚本 |
| `src/org/cloudserviceengineering/app/login/LoginServlet.java` | `WebRoot/login/` | 登录相关 Servlet 和页面 |
| - | `WebRoot/css/login.css` | 登录样式文件 |
| - | `WebRoot/js/login.js` | 登录脚本 |

### 4.2 角色路径对应关系

| 角色 | 后端 Servlet 路径 | 前端 JSP 路径 | 主页路径 |
|------|------------------|---------------|---------|
| 管理员 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/admin/` | `WebRoot/home/admin/admin-home.jsp` |
| 医生 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/doctor/` | `WebRoot/home/hospital/doctor-home.jsp` |
| 护士 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/nurse/` | `WebRoot/home/hospital/nurse-home.jsp` |
| 高管 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/executive/` | `WebRoot/home/hospital/executive-home.jsp` |
| 财务 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/finance/` | `WebRoot/home/hospital/finance-home.jsp` |
| 患者 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/patient/` | `WebRoot/home/patient/patient-home.jsp` |
| 企业 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/enterprise/` | `WebRoot/home/enterprise/enterprise-home.jsp` |
| 高校 | `src/org/cloudserviceengineering/app/business/` | `WebRoot/business/html/university/` | `WebRoot/home/university/university-home.jsp` |

## 五、文件命名规范总结

### 5.1 Java 文件命名

| 类型 | 命名规范 | 示例 |
|------|---------|------|
| Entity | `[表名首字母大写].java` | `ForumPost.java` |
| DAO | `[Entity名]DAO.java` | `ForumPostDAO.java` |
| Servlet | `[业务名]Servlet.java` 或 `[业务名]Servlet_[角色].java` | `ForumServlet.java`, `MedicalServiceServlet_Nurse.java` |

### 5.2 前端文件命名

| 类型 | 命名规范 | 示例 |
|------|---------|------|
| JSP | `[功能名].jsp` | `forum-home.jsp` |
| HTML | `[功能名].html` | `patient-login.html`（仅登录页面） |
| CSS | `[业务名].css` | `forum.css`（业务相关）或 `login.css`（非业务相关） |
| JavaScript | `[业务名].js` | `forum.js`（业务相关）或 `login.js`（非业务相关） |

## 六、重要配置文件和目录

### 6.1 business-common.js
**路径**: `WebRoot/business/scripts/business-common.js`

**作用**:
- 业务路由配置（`groupMapping`）
- 内容映射配置（`contentMapping`）
- 动态加载业务页面（`loadBusinessContent`）
- 横向导航初始化（`initHorizontalNav`）

**关键配置**:
- `groupMapping`: 业务组名称到文件夹名称的映射
- `contentMapping`: 内容ID到HTML文件名的映射
- `basePath`: 根据角色确定的基础路径

### 6.2 web.xml
**路径**: `WebRoot/WEB-INF/web.xml`

**作用**:
- Web 应用部署描述符
- Servlet 配置（如果使用 XML 配置）
- 过滤器配置
- 其他 Web 应用配置

### 6.3 DBUtil.java
**路径**: `src/util/DBUtil.java`

**作用**:
- 数据库连接工具类
- 提供统一的数据库连接方法
- 配置数据库连接参数（URL、用户名、密码）

**关键配置**:
- 数据库 URL: `jdbc:mysql://localhost:3306/smart_medical_system`
- 用户名和密码
- 数据库驱动加载

## 七、数据流向

### 7.1 前端到后端
```
用户操作 → JavaScript (forum.js)
         → fetch() 发送 HTTP 请求
         → Servlet (ForumServlet.java)
         → DAO (ForumPostDAO.java)
         → 数据库 (MySQL)
```

### 7.2 后端到前端
```
数据库 (MySQL)
         → DAO (ForumPostDAO.java) 查询数据
         → Servlet (ForumServlet.java) 返回 JSON
         → JavaScript (forum.js) 接收数据
         → 渲染到 HTML (forum-home.html)
         → 用户看到结果
```

## 八、开发新业务时的目录使用

创建新业务模块时，需要：

1. **后端**:
   - 在 `src/entity/` 创建实体类
   - 在 `src/dao/` 创建 DAO 类
   - 在 `src/servlet/[角色路径]/` 创建 Servlet

2. **前端**:
   - 在 `WebRoot/business/html/[角色路径]/[业务组]/` 创建 HTML
   - 在 `WebRoot/business/css/` 创建 CSS
   - 在 `WebRoot/business/scripts/` 创建 JavaScript

3. **配置**:
   - 更新 `WebRoot/business/scripts/business-common.js`
   - 更新 `WebRoot/home/[角色路径]/[角色]-home.html`

## 九、目录快速查找表

| 需求 | 目录路径 |
|------|---------|
| 创建实体类 | `src/entity/` |
| 创建 DAO | `src/dao/` |
| 创建 Servlet（登录相关） | `src/org/cloudserviceengineering/app/login/` |
| 创建 Servlet（业务相关） | `src/org/cloudserviceengineering/app/business/` |
| 创建 JSP（医生） | `WebRoot/business/html/doctor/[业务组]/` |
| 创建 JSP（护士） | `WebRoot/business/html/nurse/[业务组]/` |
| 创建 JSP（高管） | `WebRoot/business/html/executive/[业务组]/` |
| 创建 CSS（业务相关） | `WebRoot/business/css/` |
| 创建 CSS（非业务相关） | `WebRoot/css/` |
| 创建 JavaScript（业务相关） | `WebRoot/business/scripts/` |
| 创建 JavaScript（非业务相关） | `WebRoot/js/` |
| 修改路由配置 | `WebRoot/business/scripts/business-common.js` |
| 修改主页导航 | `WebRoot/home/[角色路径]/[角色]-home.jsp` |
| 查看编译后的类 | `WebRoot/WEB-INF/classes/` |
| 添加第三方库 | `WebRoot/WEB-INF/lib/` |
| 存放图片 | `WebRoot/images/` |

---

**总结**: 项目采用 MVC 架构，`src/` 目录存放后端 Java 代码（Servlet 分为 login 和 business 两类），`WebRoot/` 目录存放前端 Web 资源（业务相关和非业务相关分开管理），通过 Servlet 和 JavaScript 实现前后端交互。所有业务页面使用 JSP，登录页面使用 HTML。

